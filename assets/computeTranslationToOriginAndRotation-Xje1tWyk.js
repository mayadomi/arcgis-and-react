import{ad as A,ei as T,ej as k,ek as m,c_ as N,el as L,em as p,G as F,en as G,F as O}from"./index-BdlI2FVT.js";import{s as I,q as R,o as W}from"./mat4-CSxAPr-6.js";import{F as P,a as $,e as h,b as o,i as C}from"./projection-NmY8Pkrx.js";const H=new A(T),f=new A(k),c=new A(m);new A(N);function q(s){const a=w.get(s);if(a)return a;let n=H;if(s)if(s===f)n=f;else if(s===c)n=c;else{const i=s.wkid,e=s.latestWkid;if(i!=null||e!=null)L(i)||L(e)?n=f:(p(i)||p(e))&&(n=c);else{const r=s.wkt2??s.wkt;if(r){const u=r.toUpperCase();u===U?n=f:u===d&&(n=c)}}}return w.set(s,n),n}const w=new Map,U=f.wkt.toUpperCase(),d=c.wkt.toUpperCase();function S(s,a,n){const i=Math.sin(s),e=Math.cos(s),r=Math.sin(a),u=Math.cos(a),t=n;return t[0]=-i,t[4]=-r*e,t[8]=u*e,t[12]=0,t[1]=e,t[5]=-r*i,t[9]=u*i,t[13]=0,t[2]=0,t[6]=u,t[10]=r,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,t}function B(s,a,n){return S(s,a,n),I(n,n),n}function x(s,a,n,i){if(s==null||i==null)return!1;const e=P(s,$),r=P(i,h);if(e===r&&!M(r)&&(e!==o.UNKNOWN||F(s,i)))return R(n,a),!0;if(M(r)){const u=C[e][o.LON_LAT],t=C[o.LON_LAT][r];return u!=null&&t!=null&&(u(a,0,l,0),t(l,0,E,0),S(_*l[0],_*l[1],n),n[12]=E[0],n[13]=E[1],n[14]=E[2],!0)}if((r===o.WEB_MERCATOR||r===o.PLATE_CARREE||r===o.WGS84)&&(e===o.WGS84||e===o.CGCS2000&&r===o.PLATE_CARREE||e===o.SPHERICAL_ECEF||e===o.WEB_MERCATOR)){const u=C[e][o.LON_LAT],t=C[o.LON_LAT][r];return u!=null&&t!=null&&(u(a,0,l,0),t(l,0,E,0),e===o.SPHERICAL_ECEF?B(_*l[0],_*l[1],n):W(n),n[12]=E[0],n[13]=E[1],n[14]=E[2],!0)}return!1}function M(s){return s===o.SPHERICAL_ECEF||s===o.SPHERICAL_MARS_PCPF||s===o.SPHERICAL_MOON_PCPF}const _=G(1),l=O(),E=O();export{x as R,q as a};

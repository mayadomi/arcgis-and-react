import{dt as $,bM as M,ao as P}from"./index-BdlI2FVT.js";import{_ as w}from"./vec42-DpHkGCNS.js";import{n as z}from"./vec4f64-CCf6w8sj.js";const s=(n,r,t)=>[r,t],c=(n,r,t)=>[r,t,n[2]],m=(n,r,t)=>[r,t,n[2],n[3]];function E(n){return n?{originPosition:n.originPosition==="upper-left"?"upperLeft":n.originPosition==="lower-left"?"lowerLeft":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance]:[1,1],translate:n.extent!=null?[n.extent.xmin,n.extent.ymax]:[0,0]}:null}function A({scale:n,translate:r},t){return Math.round((t-r[0])/n[0])}function d({scale:n,translate:r},t){return Math.round((r[1]-t)/n[1])}function p({scale:n,translate:r},t){return t*n[0]+r[0]}function h({scale:n,translate:r},t){return r[1]-t*n[1]}function g(n,r,t){const o=new Array(t.length);if(!t.length)return o;const[i,a]=n.scale;let l=p(n,t[0][0]),e=h(n,t[0][1]);o[0]=r(t[0],l,e);for(let u=1;u<t.length;u++){const f=t[u];l+=f[0]*i,e-=f[1]*a,o[u]=r(f,l,e)}return o}function y(n,r,t){const o=new Array(t.length);for(let i=0;i<t.length;i++)o[i]=g(n,r,t[i]);return o}function L(n,r,t,o){return g(n,t?o?m:c:o?c:s,r)}function b(n,r,t,o){return y(n,t?o?m:c:o?c:s,r)}function q(n,r,t,o){return y(n,t?o?m:c:o?c:s,r)}function I(n,r,t,o,i){return r.x=A(n,t.x),r.y=d(n,t.y),r!==t&&(o&&(r.z=t.z),i&&(r.m=t.m)),r}function T(n,r,t,o,i){return t!=null&&(r.points=L(n,t.points,o,i)),r}function _(n,r,t,o,i){return t==null||(r.x=p(n,t.x),r.y=h(n,t.y),r!==t&&(o&&(r.z=t.z),i&&(r.m=t.m))),r}function j(n,r,t,o,i){return t!=null&&(r.rings=q(n,t.rings,o,i)),r}function B(n,r,t,o,i){return t!=null&&(r.paths=b(n,t.paths,o,i)),r}const x=2.4;function D(n){return $(n*x)}function F(n){return M(n)/x}function U(n,r,t,o){let{color:i,ratio:a}=r,{color:l,ratio:e}=t;e===a&&(e===1?a-=1e-6:e+=1e-6);const u=P((o-a)/(e-a),0,1);w(n,i.toArray(),l.toArray(),u)}function G(n){const t=new Uint8ClampedArray(2048);if(n=n.filter(({ratio:e})=>e>=0&&e<=1).sort((e,u)=>e.ratio-u.ratio).map(({color:e,ratio:u})=>({color:e,ratio:Math.max(u,.001)})),n.length<1)return t;let o=n[0],i=n[0],a=1;const l=z();for(let e=0;e<512;e++){const u=(e+.5)/512;for(;u>i.ratio&&a<n.length;)o=i,i=n[a++];U(l,o,i,u),t.set(l,4*e)}return t}function H(n,r,t){const o=Math.sqrt(n**2+r**2)/t;return o>1?0:3/(Math.PI*t**2)*(1-o**2)**2}function J(n){return typeof n=="function"?n:n?r=>+r[n]:()=>1}export{I as L,T as U,F as a,x as c,D as e,G as f,_ as k,H as l,E as m,j as q,J as u,B as v};
